##
## bisque configuration for NGINX and UWSGI
## https://calomel.org/nginx.html
server {
    listen       80;
    charset utf-8;
    root <YOUR_BISQUE_DIR>/public



    ## Deny illegal Host headers. 
    # if ($host !~* ^(mydomain.com|www.mydomain.com)$ ) {
    #  return 405;
    # }

    # Try to serve static content with a 7 day expiration
    location ~* ^.+\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$ {
      try_files $uri  @bisque;
      expires 7d;
    }

   # Try any other file, then default to bisque server
   location / {
      try_files $uri  @bisque;
    }


    location @bisque {
        uwsgi_pass 0.0.0.0:3031;
        include uwsgi_params;
        uwsgi_param SCRIPT_NAME "";
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }
}

